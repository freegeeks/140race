<!doctype html>
<html lang="en">
<head>
   <title>140 Race</title>
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta charset="utf-8">
    <script src="/socket.io/socket.io.js"></script>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>

<div class="base">

<div class="login none">
	<div class="header">
		<img src="/img/logo.png" class="logo">
		<span class="login-bt">Login</span>
	</div>
</div>

<div class="welcome none">
	<div class="header">
		<img src="/img/logo.png" class="logo">
		<h2 class="title">Welcome!</h2>
		<p class="username">#re2005</p>
		<h3 class="title-s">Waiting other player to connect</h3>
	</div>
</div>

<div class="preparing">
	<div class="header">
		<img src="/img/logo.png" class="logo">
		<p class="x"> X </p>
		<div class="users">
			<p class="username">#re2005</p>
			<p class="username">#opponent</p>
		</div>
		<h3 class="title-s">Get ready!</h3>
		<span id="score" class="preparing-counter">0</span>

		<div id="hashtag">
        </div>

	</div>
</div>

<!-- Close BASE -->
</div>




<div class="wrap_body none">
<div class="header">
	<div class="userInfo user1">
		<span class="username">#re2005</span>
		<span class="speed p1">74</span>
		<span class="score">5234</span>
	</div>
	<div class="counter">
		140
	</div>
	<div class="userInfo user2">
		<span class="username">#renansaddam</span>
		<span class="speed p2">45</span>
		<span class="score">74222</span>
	</div>
</div>
<section>
	<div class="track-wrap">
		<div class="twitter">
			<p>Renatexx</p>
		</div>
		<div class="player_1"></div>
		<div class="player_2"></div>
		<div class="track"></div>	
	</div>
</section>
</div>

<script src="/js/jquery.min.js"></script>
<script src="/js/140race.js"></script>

</body>












  <script>
    /*
    * Add JS here at the bottom of the page
    * to avoid the whole document.ready since
    * we are not using jquery
    */

    // Single DOM element selection
    window.$ = function(selector) {
      return document.querySelector(selector);
    };

    // Multiple DOM element selection
    window.$$ = function(selector) {
        var items = {};
        var results = Array.prototype.slice.call(document.querySelectorAll(selector));
        var length = results.length;
        
        for (var i = 0 ; i < length; i++) {
            items[i] = results[i];
        }
        
        items.length = length;
        items.splice = [].splice();
        
        items.each = function(callback) {
            for (var i = 0 ; i < length; i++) {
                callback.call(items[i]);
            }
        };

        items.on = function (event, fn) {
            []['forEach'].call(this, function (el) {
                el.on(event, fn);
            });
            return this;
        };

        return items;
    };

    // Bind event using "on"
    Element.prototype.on = Element.prototype.addEventListener;
    Element.prototype.trigger = function (type, data) {
        var event = document.createEvent('HTMLEvents');
        event.initEvent(type, true, true);
        event.data = data || {};
        event.eventName = type;
        event.target = this;
        this.dispatchEvent(event);
        return this;
    };

  var socket = io.connect('http://localhost', 8888);
  socket.on('connect', function () {
      socket.emit('gimmehashtags');
  });

    socket.on('hashtag', function (data) {
      el = document.createElement('a');
      el.href = '/'+data.text;
      el.innerHTML = '#'+data.text;
      $('#hashtags').appendChild(el);
      $('#hashtags').scrollTop = document.querySelector('#hashtags').scrollHeight;
    });
  </script>
</html>
